import{k as w,r as a,d as C,j as e,a2 as D,m as M,a3 as P,a4 as i}from"./vendor-react-C-MT8-It.js";import{a as S}from"./index-CxN-8fUR.js";import{f as x}from"./vendor-date-6LT6p13l.js";import"./vendor-other-BpzjL-rm.js";const E=()=>{const[m]=w(),g=m.get("projectId"),n=m.get("taskId"),h={id:"user_2"},[t,j]=a.useState(null),[r,y]=a.useState(null),[c,b]=a.useState([]),[l,u]=a.useState(""),[k,p]=a.useState(!0),{currentWorkspace:N}=C(s=>s.workspace),f=async()=>{},z=async()=>{if(p(!0),!g||!n)return;const s=N.projects.find(o=>o.id===g);if(!s)return;const d=s.tasks.find(o=>o.id===n);d&&(j(d),y(s),p(!1))},v=async()=>{if(l.trim())try{i.loading("Adding comment..."),await new Promise(d=>setTimeout(d,2e3));const s={id:Date.now(),user:{id:1,name:"User",image:S.profile_img_a},content:l,createdAt:new Date};b(d=>[...d,s]),u(""),i.dismissAll(),i.success("Comment added.")}catch(s){i.dismissAll(),i.error(s?.response?.data?.message||s.message),console.error(s)}};return a.useEffect(()=>{z()},[n]),a.useEffect(()=>{if(n&&t){f();const s=setInterval(()=>{f()},1e4);return()=>clearInterval(s)}},[n,t]),k?e.jsx("div",{className:"text-gray-500 dark:text-zinc-400 px-4 py-6",children:"Loading task details..."}):t?e.jsxs("div",{className:"flex flex-col-reverse lg:flex-row gap-6 sm:p-4 text-gray-900 dark:text-zinc-100 max-w-6xl mx-auto",children:[e.jsx("div",{className:"w-full lg:w-2/3",children:e.jsxs("div",{className:"p-5 rounded-md  border border-gray-300 dark:border-zinc-800  flex flex-col lg:h-[80vh]",children:[e.jsxs("h2",{className:"text-base font-semibold flex items-center gap-2 mb-4 text-gray-900 dark:text-white",children:[e.jsx(D,{className:"size-5"})," Task Discussion (",c.length,")"]}),e.jsx("div",{className:"flex-1 md:overflow-y-scroll no-scrollbar",children:c.length>0?e.jsx("div",{className:"flex flex-col gap-4 mb-6 mr-2",children:c.map(s=>e.jsxs("div",{className:`sm:max-w-4/5 dark:bg-gradient-to-br dark:from-zinc-800 dark:to-zinc-900 border border-gray-300 dark:border-zinc-700 p-3 rounded-md ${s.user.id===h?.id?"ml-auto":"mr-auto"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 text-sm text-gray-500 dark:text-zinc-400",children:[e.jsx("img",{src:s.user.image,alt:"avatar",className:"size-5 rounded-full"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:s.user.name}),e.jsxs("span",{className:"text-xs text-gray-400 dark:text-zinc-600",children:["â€¢ ",x(new Date(s.createdAt),"dd MMM yyyy, HH:mm")]})]}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-zinc-200",children:s.content})]},s.id))}):e.jsx("p",{className:"text-gray-600 dark:text-zinc-500 mb-4 text-sm",children:"No comments yet. Be the first!"})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-end gap-3",children:[e.jsx("textarea",{value:l,onChange:s=>u(s.target.value),placeholder:"Write a comment...",className:"w-full dark:bg-zinc-800 border border-gray-300 dark:border-zinc-700 rounded-md p-2 text-sm text-gray-900 dark:text-zinc-200 resize-none focus:outline-none focus:ring-1 focus:ring-blue-600",rows:3}),e.jsx("button",{onClick:v,className:"bg-gradient-to-l from-blue-500 to-blue-600 transition-colors text-white text-sm px-5 py-2 rounded ",children:"Post"})]})]})}),e.jsxs("div",{className:"w-full lg:w-1/2 flex flex-col gap-6",children:[e.jsxs("div",{className:"p-5 rounded-md bg-white dark:bg-zinc-900 border border-gray-300 dark:border-zinc-800 ",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("h1",{className:"text-lg font-medium text-gray-900 dark:text-zinc-100",children:t.title}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[e.jsx("span",{className:"px-2 py-0.5 rounded bg-zinc-200 dark:bg-zinc-700 text-zinc-900 dark:text-zinc-300 text-xs",children:t.status}),e.jsx("span",{className:"px-2 py-0.5 rounded bg-blue-200 dark:bg-blue-900 text-blue-900 dark:text-blue-300 text-xs",children:t.type}),e.jsx("span",{className:"px-2 py-0.5 rounded bg-green-200 dark:bg-emerald-900 text-green-900 dark:text-emerald-300 text-xs",children:t.priority})]})]}),t.description&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400 leading-relaxed mb-4",children:t.description}),e.jsx("hr",{className:"border-zinc-200 dark:border-zinc-700 my-3"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm text-gray-700 dark:text-zinc-300",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:t.assignee?.image,className:"size-5 rounded-full",alt:"avatar"}),t.assignee?.name||"Unassigned"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"size-4 text-gray-500 dark:text-zinc-500"}),"Due : ",x(new Date(t.due_date),"dd MMM yyyy")]})]})]}),r&&e.jsxs("div",{className:"p-4 rounded-md bg-white dark:bg-zinc-900 text-zinc-700 dark:text-zinc-200 border border-gray-300 dark:border-zinc-800 ",children:[e.jsx("p",{className:"text-xl font-medium mb-4",children:"Project Details"}),e.jsxs("h2",{className:"text-gray-900 dark:text-zinc-100 flex items-center gap-2",children:[" ",e.jsx(P,{className:"size-4"})," ",r.name]}),e.jsxs("p",{className:"text-xs mt-3",children:["Project Start Date: ",x(new Date(r.start_date),"dd MMM yyyy")]}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500 dark:text-zinc-400 mt-3",children:[e.jsxs("span",{children:["Status: ",r.status]}),e.jsxs("span",{children:["Priority: ",r.priority]}),e.jsxs("span",{children:["Progress: ",r.progress,"%"]})]})]})]})]}):e.jsx("div",{className:"text-red-500 px-4 py-6",children:"Task not found."})};export{E as default};
