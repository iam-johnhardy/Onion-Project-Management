import{u as T,n as D,r as u,j as e,X as w,a3 as E,w as M,G as I,x as O,Z as S,B as A,l as b,a2 as n}from"./vendor-react-BOUMS_NX.js";import{d as C,u as P}from"./index-C3CwCeoQ.js";import{f as j}from"./vendor-date-D_1Ha1jh.js";import"./vendor-other-Bt73QmDX.js";const y={BUG:{icon:A,color:"text-red-600 dark:text-red-400"},FEATURE:{icon:S,color:"text-blue-600 dark:text-blue-400"},TASK:{icon:O,color:"text-green-600 dark:text-green-400"},IMPROVEMENT:{icon:I,color:"text-purple-600 dark:text-purple-400"},OTHER:{icon:M,color:"text-amber-600 dark:text-amber-400"}},z={LOW:{background:"bg-red-100 dark:bg-red-950",prioritycolor:"text-red-600 dark:text-red-400"},MEDIUM:{background:"bg-blue-100 dark:bg-blue-950",prioritycolor:"text-blue-600 dark:text-blue-400"},HIGH:{background:"bg-emerald-100 dark:bg-emerald-950",prioritycolor:"text-emerald-600 dark:text-emerald-400"}},U=({tasks:c})=>{const m=T(),N=D(),[l,d]=u.useState([]),[o,g]=u.useState({status:"",type:"",priority:"",assignee:""}),v=u.useMemo(()=>Array.from(new Set(c.map(s=>s.assignee?.name).filter(Boolean))),[c]),p=u.useMemo(()=>c.filter(s=>{const{status:a,type:t,priority:i,assignee:x}=o;return(!a||s.status===a)&&(!t||s.type===t)&&(!i||s.priority===i)&&(!x||s.assignee?.name===x)}),[o,c]),f=s=>{const{name:a,value:t}=s.target;g(i=>({...i,[a]:t}))},h=async(s,a)=>{try{n.loading("Updating status..."),await new Promise(i=>setTimeout(i,2e3));let t=structuredClone(c.find(i=>i.id===s));t.status=a,m(P(t)),n.dismissAll(),n.success("Task status updated successfully")}catch(t){n.dismissAll(),n.error(t?.response?.data?.message||t.message)}},k=async()=>{try{if(!window.confirm("Are you sure you want to delete the selected tasks?"))return;n.loading("Deleting tasks..."),await new Promise(a=>setTimeout(a,2e3)),m(C(l)),n.dismissAll(),n.success("Tasks deleted successfully")}catch(s){n.dismissAll(),n.error(s?.response?.data?.message||s.message)}};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap gap-4 mb-4",children:[["status","type","priority","assignee"].map(s=>{const a={status:[{label:"All Statuses",value:""},{label:"To Do",value:"TODO"},{label:"In Progress",value:"IN_PROGRESS"},{label:"Done",value:"DONE"}],type:[{label:"All Types",value:""},{label:"Task",value:"TASK"},{label:"Bug",value:"BUG"},{label:"Feature",value:"FEATURE"},{label:"Improvement",value:"IMPROVEMENT"},{label:"Other",value:"OTHER"}],priority:[{label:"All Priorities",value:""},{label:"Low",value:"LOW"},{label:"Medium",value:"MEDIUM"},{label:"High",value:"HIGH"}],assignee:[{label:"All Assignees",value:""},...v.map(t=>({label:t,value:t}))]};return e.jsx("select",{name:s,onChange:f,className:" border not-dark:bg-white border-zinc-300 dark:border-zinc-800 outline-none px-3 py-1 rounded text-sm text-zinc-900 dark:text-zinc-200",children:a[s].map((t,i)=>e.jsx("option",{value:t.value,children:t.label},i))},s)}),(o.status||o.type||o.priority||o.assignee)&&e.jsxs("button",{type:"button",onClick:()=>g({status:"",type:"",priority:"",assignee:""}),className:"px-3 py-1 flex items-center gap-2 rounded bg-gradient-to-br from-purple-400 to-purple-500 text-zinc-100 dark:text-zinc-200 text-sm transition-colors",children:[e.jsx(w,{className:"size-3"})," Reset"]}),l.length>0&&e.jsxs("button",{type:"button",onClick:k,className:"px-3 py-1 flex items-center gap-2 rounded bg-gradient-to-br from-indigo-400 to-indigo-500 text-zinc-100 dark:text-zinc-200 text-sm transition-colors",children:[e.jsx(E,{className:"size-3"})," Delete"]})]}),e.jsx("div",{className:"overflow-auto rounded-lg lg:border border-zinc-300 dark:border-zinc-800",children:e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"hidden lg:block overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm text-left not-dark:bg-white text-zinc-900 dark:text-zinc-300",children:[e.jsx("thead",{className:"text-xs uppercase dark:bg-zinc-800/70 text-zinc-500 dark:text-zinc-400 ",children:e.jsxs("tr",{children:[e.jsx("th",{className:"pl-2 pr-1",children:e.jsx("input",{onChange:()=>l.length>1?d([]):d(c.map(s=>s.id)),checked:l.length===c.length,type:"checkbox",className:"size-3 accent-zinc-600 dark:accent-zinc-500"})}),e.jsx("th",{className:"px-4 pl-0 py-3",children:"Title"}),e.jsx("th",{className:"px-4 py-3",children:"Type"}),e.jsx("th",{className:"px-4 py-3",children:"Priority"}),e.jsx("th",{className:"px-4 py-3",children:"Status"}),e.jsx("th",{className:"px-4 py-3",children:"Assignee"}),e.jsx("th",{className:"px-4 py-3",children:"Due Date"})]})}),e.jsx("tbody",{children:p.length>0?p.map(s=>{const{icon:a,color:t}=y[s.type]||{},{background:i,prioritycolor:x}=z[s.priority]||{};return e.jsxs("tr",{onClick:()=>N(`/taskDetails?projectId=${s.projectId}&taskId=${s.id}`),className:" border-t border-zinc-300 dark:border-zinc-800 group hover:bg-zinc-50 dark:hover:bg-zinc-700 transition-all cursor-pointer",children:[e.jsx("td",{onClick:r=>r.stopPropagation(),className:"pl-2 pr-1",children:e.jsx("input",{type:"checkbox",className:"size-3 accent-zinc-600 dark:accent-zinc-500",onChange:()=>l.includes(s.id)?d(l.filter(r=>r!==s.id)):d(r=>[...r,s.id]),checked:l.includes(s.id)})}),e.jsx("td",{className:"px-4 pl-0 py-2",children:s.title}),e.jsx("td",{className:"px-4 py-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[a&&e.jsx(a,{className:`size-4 ${t}`}),e.jsx("span",{className:`uppercase text-xs ${t}`,children:s.type})]})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:`text-xs px-2 py-1 rounded ${i} ${x}`,children:s.priority})}),e.jsx("td",{onClick:r=>r.stopPropagation(),className:"px-4 py-2",children:e.jsxs("select",{name:"status",onChange:r=>h(s.id,r.target.value),value:s.status,className:"group-hover:ring ring-zinc-100 outline-none px-2 pr-4 py-1 rounded text-sm text-zinc-900 dark:text-zinc-200 cursor-pointer",children:[e.jsx("option",{value:"TODO",children:"To Do"}),e.jsx("option",{value:"IN_PROGRESS",children:"In Progress"}),e.jsx("option",{value:"DONE",children:"Done"})]})}),e.jsx("td",{className:"px-4 py-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:s.assignee?.image,className:"size-5 rounded-full",alt:"avatar"}),s.assignee?.name||"-"]})}),e.jsx("td",{className:"px-4 py-2",children:e.jsxs("div",{className:"flex items-center gap-1 text-zinc-600 dark:text-zinc-400",children:[e.jsx(b,{className:"size-4"}),j(new Date(s.due_date),"dd MMMM")]})})]},s.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"text-center text-zinc-500 dark:text-zinc-400 py-6",children:"No tasks found for the selected filters."})})})]})}),e.jsx("div",{className:"lg:hidden flex flex-col gap-4",children:p.length>0?p.map(s=>{const{icon:a,color:t}=y[s.type]||{},{background:i,prioritycolor:x}=z[s.priority]||{};return e.jsxs("div",{className:" dark:bg-gradient-to-br dark:from-zinc-800/70 dark:to-zinc-900/50 border border-zinc-300 dark:border-zinc-800 rounded-lg p-4 flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-zinc-900 dark:text-zinc-200 text-sm font-semibold",children:s.title}),e.jsx("input",{type:"checkbox",className:"size-4 accent-zinc-600 dark:accent-zinc-500",onChange:()=>l.includes(s.id)?d(l.filter(r=>r!==s.id)):d(r=>[...r,s.id]),checked:l.includes(s.id)})]}),e.jsxs("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 flex items-center gap-2",children:[a&&e.jsx(a,{className:`size-4 ${t}`}),e.jsx("span",{className:`${t} uppercase`,children:s.type})]}),e.jsx("div",{children:e.jsx("span",{className:`text-xs px-2 py-1 rounded ${i} ${x}`,children:s.priority})}),e.jsxs("div",{children:[e.jsx("label",{className:"text-zinc-600 dark:text-zinc-400 text-xs",children:"Status"}),e.jsxs("select",{name:"status",onChange:r=>h(s.id,r.target.value),value:s.status,className:"w-full mt-1 bg-zinc-100 dark:bg-zinc-800 ring-1 ring-zinc-300 dark:ring-zinc-700 outline-none px-2 py-1 rounded text-sm text-zinc-900 dark:text-zinc-200",children:[e.jsx("option",{value:"TODO",children:"To Do"}),e.jsx("option",{value:"IN_PROGRESS",children:"In Progress"}),e.jsx("option",{value:"DONE",children:"Done"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-zinc-700 dark:text-zinc-300",children:[e.jsx("img",{src:s.assignee?.image,className:"size-5 rounded-full",alt:"avatar"}),s.assignee?.name||"-"]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-zinc-600 dark:text-zinc-400",children:[e.jsx(b,{className:"size-4"}),j(new Date(s.due_date),"dd MMMM")]})]},s.id)}):e.jsx("p",{className:"text-center text-zinc-500 dark:text-zinc-400 py-4",children:"No tasks found for the selected filters."})})]})})]})};export{U as default};
